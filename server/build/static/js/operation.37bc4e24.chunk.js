webpackJsonp([8],{1020:function(e,t,a){var n=a(1021);"string"===typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0};r.transform=void 0;a(222)(n,r);n.locals&&(e.exports=n.locals)},1021:function(e,t,a){t=e.exports=a(221)(void 0),t.push([e.i,".operation-page .search-bar {\n  margin: 10px 0;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  -ms-flex-align: center;\n      align-items: center;\n}\n",""])},1036:function(e,t,a){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,i){try{var l=t[r](i),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,i){try{var l=t[r](i),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}return n("next")})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m,d,p=a(888),f=a.n(p),b=a(0),h=a.n(b),g=a(892),v=a(220),E=a(22),w=a.n(E),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=v.q.Item,D=v.D.Option,C=v.B.Group,O=(m=v.q.create())(d=function(e){function t(){var e,a,l,o,s=this;r(this,t);for(var c=arguments.length,u=Array(c),m=0;m<c;m++)u[m]=arguments[m];return a=l=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),l.state={disabled:!0,title:"\u8be6\u60c5",okText:"\u7f16\u8f91"},l.onCancel=function(e){if("\u7f16\u8f91"===l.state.title&&"ant-btn"===e.currentTarget.className)return l.setState({disabled:!0,title:"\u8be6\u60c5",okText:"\u7f16\u8f91"}),l.props.form.resetFields();l.props.onClose()},l.submitHandle=function(){var e=l,t=e.state.disabled,a=e.props.data;if(t)return void l.setState({disabled:!1,title:"\u7f16\u8f91",okText:"\u786e\u5b9a"});l.props.form.validateFields(function(){var e=n(f.a.mark(function e(t,n){var r,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(r=Object.assign({},n,{bornDate:n.bornDate&&n.bornDate.format("YYYY-MM-DD"),workDate:n.workDate&&n.workDate.format("YYYY-MM-DD"),_id:a._id}),!a.isAdd){e.next=9;break}return e.next=6,Object(g.a)(r);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,Object(g.g)(r);case 11:e.t0=e.sent;case 12:i=e.t0,console.log(i),0===i.code?(v.J.success(i.msg),l.props.onClose(!0)):v.J.error("\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01");case 15:case"end":return e.stop()}},e,s)}));return function(t,a){return e.apply(this,arguments)}}())},o=a,i(l,o)}return l(t,e),x(t,[{key:"componentDidMount",value:function(){this.props.data.isAdd&&this.setState({disabled:!1,title:"\u6dfb\u52a0",okText:"\u786e\u5b9a"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.disabled,n=t.title,r=t.okText,i=this.props,l=i.form.getFieldDecorator,o=i.data,s={labelCol:{span:6},wrapperCol:{span:18}};return h.a.createElement(v.x,{title:n,okText:r,visible:this.props.visible,onOk:this.submitHandle,onCancel:function(t){return e.onCancel(t)},width:"700px"},h.a.createElement(v.q,{className:"form"},h.a.createElement(v.C,{gutter:20},h.a.createElement(v.m,{md:12},h.a.createElement(y,Object.assign({},s,{label:"\u59d3\u540d"}),l("name",{initialValue:o.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"}]})(h.a.createElement(v.s,{disabled:a}))),h.a.createElement(y,Object.assign({},s,{label:"\u6027\u522b"}),l("sex",{initialValue:o.sex||0,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b\uff01"}]})(h.a.createElement(C,{disabled:a},h.a.createElement(v.B,{value:0},"\u7537"),h.a.createElement(v.B,{value:1},"\u5973")))),h.a.createElement(y,Object.assign({},s,{label:"\u51fa\u751f\u65e5\u671f"}),l("bornDate",{initialValue:o.bornDate&&w()(o.bornDate),rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u51fa\u751f\u65e5\u671f\uff01"}]})(h.a.createElement(v.n,{disabled:a}))),h.a.createElement(y,Object.assign({},s,{label:"\u5b66\u5386"}),l("education",{initialValue:o.education,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b66\u5386\uff01"}]})(h.a.createElement(v.D,{disabled:a},h.a.createElement(D,{value:"\u5c0f\u5b66"},"\u5c0f\u5b66"),h.a.createElement(D,{value:"\u521d\u4e2d"},"\u521d\u4e2d"),h.a.createElement(D,{value:"\u9ad8\u4e2d/\u4e2d\u4e13"},"\u9ad8\u4e2d/\u4e2d\u4e13"),h.a.createElement(D,{value:"\u5927\u4e13"},"\u5927\u4e13"),h.a.createElement(D,{value:"\u672c\u79d1"},"\u672c\u79d1"),h.a.createElement(D,{value:"\u7814\u7a76\u751f/\u7855\u58eb"},"\u7814\u7a76\u751f/\u7855\u58eb"),h.a.createElement(D,{value:"\u535a\u58eb"},"\u535a\u58eb")))),h.a.createElement(y,Object.assign({},s,{label:"\u6c11\u65cf"}),l("nation",{initialValue:o.nation||"\u6c49\u65cf",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6c11\u65cf\uff01"}]})(h.a.createElement(v.s,{disabled:a}))),h.a.createElement(y,Object.assign({},s,{label:"\u7c4d\u8d2f"}),l("nativePlace",{initialValue:o.nativePlace,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u5730\u5740\uff01\uff01"}]})(h.a.createElement(v.s.TextArea,{disabled:a})))),h.a.createElement(v.m,{md:12},h.a.createElement(y,Object.assign({},s,{label:"\u73b0\u5c45\u5730\u5740"}),l("nowPlace",{initialValue:o.nowPlace,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u73b0\u5c45\u5730\u5740\uff01\uff01"}]})(h.a.createElement(v.s.TextArea,{disabled:a}))),h.a.createElement(y,Object.assign({},s,{label:"\u624b\u673a\u53f7"}),l("phone",{initialValue:o.phone,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\uff01"}]})(h.a.createElement(v.s,{disabled:a}))),h.a.createElement(y,Object.assign({},s,{label:"\u5165\u804c\u65e5\u671f"}),l("workDate",{initialValue:o.workDate&&w()(o.workDate),rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5165\u804c\u65e5\u671f\uff01"}]})(h.a.createElement(v.n,{disabled:a}))),h.a.createElement(y,Object.assign({},s,{label:"\u6240\u5728\u90e8\u95e8"}),l("apartment",{initialValue:o.apartment,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6240\u5728\u90e8\u95e8\uff01"}]})(h.a.createElement(v.s,{disabled:a}))),h.a.createElement(y,Object.assign({},s,{label:"\u6240\u5728\u804c\u4f4d"}),l("role",{initialValue:o.role,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6240\u5728\u804c\u4f4d\uff01"}]})(h.a.createElement(v.s,{disabled:a}))),h.a.createElement(y,Object.assign({},s,{label:"\u5728\u804c\u72b6\u6001"}),l("statu",{initialValue:o.statu,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5728\u804c\u72b6\u6001\uff01"}]})(h.a.createElement(v.E,{disabled:a,checkedChildren:"\u5728",unCheckedChildren:"\u79bb",defaultChecked:!0})))))))}}]),t}(b.Component))||d;a(1020);a.d(t,"default",function(){return j});var k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),j=function(e){function t(){var e,a,n,r,i=this;s(this,t);for(var l=arguments.length,u=Array(l),m=0;m<l;m++)u[m]=arguments[m];return a=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state={personList:[],total:0,rowData:{},searchData:{limit:10,pageNum:1,name:""},alertVisible:!1},n.initData=o(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(n.state.searchData);case 2:t=e.sent,t.data&&n.setState({personList:t.data.rows,total:t.data.total});case 4:case"end":return e.stop()}},e,i)})),n.pageSizeChange=function(){var e=o(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({searchData:Object.assign({},n.state.searchData,{limit:a})});case 2:n.initData();case 3:case"end":return e.stop()}},e,i)}));return function(t,a){return e.apply(this,arguments)}}(),n.pageNumChange=function(){var e=o(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({searchData:Object.assign({},n.state.searchData,{pageNum:t})});case 2:n.initData();case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.searchHandle=function(){var e=o(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({searchData:Object.assign({},n.state.searchData,{name:t})});case 2:n.initData();case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),n.deleteHandle=function(e){v.x.confirm({title:"\u63d0\u793a?",content:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u6761\u6570\u636e\u5417\uff1f",onOk:function(){function t(){return a.apply(this,arguments)}var a=o(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.b)({_id:e});case 2:v.J.success("\u5220\u9664\u6210\u529f\uff01"),n.initData();case 4:case"end":return t.stop()}},t,i)}));return t}()})},n.showAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAdd:!0};n.setState({alertVisible:!0,rowData:e})},n.closeAlert=function(e){n.setState({alertVisible:!1}),e&&n.initData()},r=a,c(n,r)}return u(t,e),k(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.personList,n=t.total,r=t.searchData,i=t.rowData,l=t.alertVisible;return h.a.createElement("div",{className:"operation-page"},h.a.createElement("div",{className:"search-bar"},h.a.createElement(v.s.Search,{style:{width:200},placeholder:"\u8f93\u5165\u59d3\u540d\u4ee5\u6a21\u7cca\u641c\u7d22",onSearch:this.searchHandle,enterButton:!0}),h.a.createElement(v.h,{type:"primary",onClick:function(){return e.showAlert()}},"\u6dfb\u52a0")),h.a.createElement(v.F,{dataSource:a,bordered:!0,rowKey:"_id",size:"small",pagination:!1,scroll:{x:1e3}},h.a.createElement(v.F.Column,{title:"\u59d3\u540d",dataIndex:"name"}),h.a.createElement(v.F.Column,{title:"\u6027\u522b",dataIndex:"sex",render:function(e,t){return h.a.createElement("span",null,0===e?"\u7537":"\u5973")}}),h.a.createElement(v.F.Column,{title:"\u51fa\u751f\u65e5\u671f",dataIndex:"bornDate"}),h.a.createElement(v.F.Column,{title:"\u5b66\u5386",dataIndex:"education"}),h.a.createElement(v.F.Column,{title:"\u6c11\u65cf",dataIndex:"nation"}),h.a.createElement(v.F.Column,{title:"\u7c4d\u8d2f",dataIndex:"nativePlace"}),h.a.createElement(v.F.Column,{title:"\u73b0\u5c45\u5730",dataIndex:"nowPlace"}),h.a.createElement(v.F.Column,{title:"\u624b\u673a\u53f7",dataIndex:"phone"}),h.a.createElement(v.F.Column,{title:"\u5165\u804c\u65e5\u671f",dataIndex:"workDate"}),h.a.createElement(v.F.Column,{title:"\u90e8\u95e8",dataIndex:"apartment"}),h.a.createElement(v.F.Column,{title:"\u804c\u4f4d",dataIndex:"role"}),h.a.createElement(v.F.Column,{title:"\u5728\u804c\u72b6\u6001",dataIndex:"statu",render:function(e,t){return h.a.createElement("span",null,!0===e?"\u5728\u804c":"\u79bb\u804c")}}),h.a.createElement(v.F.Column,{title:"\u64cd\u4f5c",width:"120px",render:function(t,a){return h.a.createElement("span",null,h.a.createElement(v.h,{type:"primary",size:"small",onClick:function(){return e.showAlert(a)}},"\u8be6\u60c5"),"\xa0\xa0\xa0",h.a.createElement(v.h,{type:"danger",size:"small",onClick:function(){return e.deleteHandle(a._id)}},"\u5220\u9664"))}})),h.a.createElement(v.y,{style:{margin:"15px auto",textAlign:"center"},size:"small",showQuickJumper:!0,showSizeChanger:!0,total:n,pageSize:r.limit,current:r.pageNum,showTotal:function(e){return"\u5171 "+e+" \u6761"},onShowSizeChange:this.pageSizeChange,onChange:this.pageNumChange}),l&&h.a.createElement(O,{visible:l,data:i,onClose:this.closeAlert}))}}]),t}(h.a.Component)}});